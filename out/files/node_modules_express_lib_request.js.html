<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>node_modules&#x2F;express&#x2F;lib&#x2F;request.js</title>
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.5.1&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="..&#x2F;assets/favicon.png">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;combo?3.5.1&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="..&#x2F;assets/css/logo.png" title=""></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/Enables filtering in class lists..html">Enables filtering in class lists.</a></li>
            
                <li><a href="..&#x2F;classes/Namespace container for the JsWorld library objects..Class for localised formatting of currency amounts.

&lt;p&gt;See: &lt;a href=&quot;http:&#x2F;&#x2F;www.opengroup.org&#x2F;onlinepubs&#x2F;009695399&#x2F;basedefs&#x2F;xbd_chap07.html#tag_07_03_03&quot;&gt;
POSIX LC_MONETARY&lt;&#x2F;a&gt;..html">Namespace container for the JsWorld library objects..Class for localised formatting of currency amounts.

&lt;p&gt;See: &lt;a href=&quot;http:&#x2F;&#x2F;www.opengroup.org&#x2F;onlinepubs&#x2F;009695399&#x2F;basedefs&#x2F;xbd_chap07.html#tag_07_03_03&quot;&gt;
POSIX LC_MONETARY&lt;&#x2F;a&gt;.</a></li>
            
                <li><a href="..&#x2F;classes/Namespace container for the JsWorld library objects..Class for localised formatting of dates and times.

&lt;p&gt;See: &lt;a href=&quot;http:&#x2F;&#x2F;www.opengroup.org&#x2F;onlinepubs&#x2F;000095399&#x2F;basedefs&#x2F;xbd_chap07.html#tag_07_03_05&quot;&gt;
POSIX LC_TIME&lt;&#x2F;a&gt;..html">Namespace container for the JsWorld library objects..Class for localised formatting of dates and times.

&lt;p&gt;See: &lt;a href=&quot;http:&#x2F;&#x2F;www.opengroup.org&#x2F;onlinepubs&#x2F;000095399&#x2F;basedefs&#x2F;xbd_chap07.html#tag_07_03_05&quot;&gt;
POSIX LC_TIME&lt;&#x2F;a&gt;.</a></li>
            
                <li><a href="..&#x2F;classes/Namespace container for the JsWorld library objects..Class for localised formatting of numbers.

&lt;p&gt;See: &lt;a href=&quot;http:&#x2F;&#x2F;www.opengroup.org&#x2F;onlinepubs&#x2F;000095399&#x2F;basedefs&#x2F;xbd_chap07.html#tag_07_03_04&quot;&gt;
POSIX LC_NUMERIC&lt;&#x2F;a&gt;..html">Namespace container for the JsWorld library objects..Class for localised formatting of numbers.

&lt;p&gt;See: &lt;a href=&quot;http:&#x2F;&#x2F;www.opengroup.org&#x2F;onlinepubs&#x2F;000095399&#x2F;basedefs&#x2F;xbd_chap07.html#tag_07_03_04&quot;&gt;
POSIX LC_NUMERIC&lt;&#x2F;a&gt;.</a></li>
            
                <li><a href="..&#x2F;classes/Namespace container for the JsWorld library objects..Class for parsing localised currency amount strings..html">Namespace container for the JsWorld library objects..Class for parsing localised currency amount strings.</a></li>
            
                <li><a href="..&#x2F;classes/Namespace container for the JsWorld library objects..Class for parsing localised date and time strings..html">Namespace container for the JsWorld library objects..Class for parsing localised date and time strings.</a></li>
            
                <li><a href="..&#x2F;classes/Namespace container for the JsWorld library objects..Class for parsing localised number strings..html">Namespace container for the JsWorld library objects..Class for parsing localised number strings.</a></li>
            
                <li><a href="..&#x2F;classes/Namespace container for the JsWorld library objects..Represents a POSIX-style locale with its numeric, monetary and date&#x2F;time 
properties. Also provides a set of locale helper methods.

&lt;p&gt;The locale properties follow the POSIX standards:

&lt;ul&gt;
    &lt;li&gt;&lt;a href=&quot;http:&#x2F;&#x2F;www.opengroup.org&#x2F;onlinepubs&#x2F;000095399&#x2F;basedefs&#x2F;xbd_chap07.html#tag_07_03_04&quot;&gt;POSIX LC_NUMERIC&lt;&#x2F;a&gt;
    &lt;li&gt;&lt;a href=&quot;http:&#x2F;&#x2F;www.opengroup.org&#x2F;onlinepubs&#x2F;009695399&#x2F;basedefs&#x2F;xbd_chap07.html#tag_07_03_03&quot;&gt;POSIX LC_MONETARY&lt;&#x2F;a&gt;
    &lt;li&gt;&lt;a href=&quot;http:&#x2F;&#x2F;www.opengroup.org&#x2F;onlinepubs&#x2F;000095399&#x2F;basedefs&#x2F;xbd_chap07.html#tag_07_03_05&quot;&gt;POSIX LC_TIME&lt;&#x2F;a&gt;
&lt;&#x2F;ul&gt;.html">Namespace container for the JsWorld library objects..Represents a POSIX-style locale with its numeric, monetary and date&#x2F;time 
properties. Also provides a set of locale helper methods.

&lt;p&gt;The locale properties follow the POSIX standards:

&lt;ul&gt;
    &lt;li&gt;&lt;a href=&quot;http:&#x2F;&#x2F;www.opengroup.org&#x2F;onlinepubs&#x2F;000095399&#x2F;basedefs&#x2F;xbd_chap07.html#tag_07_03_04&quot;&gt;POSIX LC_NUMERIC&lt;&#x2F;a&gt;
    &lt;li&gt;&lt;a href=&quot;http:&#x2F;&#x2F;www.opengroup.org&#x2F;onlinepubs&#x2F;009695399&#x2F;basedefs&#x2F;xbd_chap07.html#tag_07_03_03&quot;&gt;POSIX LC_MONETARY&lt;&#x2F;a&gt;
    &lt;li&gt;&lt;a href=&quot;http:&#x2F;&#x2F;www.opengroup.org&#x2F;onlinepubs&#x2F;000095399&#x2F;basedefs&#x2F;xbd_chap07.html#tag_07_03_05&quot;&gt;POSIX LC_TIME&lt;&#x2F;a&gt;
&lt;&#x2F;ul&gt;</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: node_modules&#x2F;express&#x2F;lib&#x2F;request.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">

&#x2F;*!
 * Express - request
 * Copyright(c) 2010 TJ Holowaychuk &lt;tj@vision-media.ca&gt;
 * MIT Licensed
 *&#x2F;

&#x2F;**
 * Module dependencies.
 *&#x2F;

var http = require(&#x27;http&#x27;)
  , req = http.IncomingMessage.prototype
  , utils = require(&#x27;.&#x2F;utils&#x27;)
  , parse = require(&#x27;url&#x27;).parse
  , mime = require(&#x27;mime&#x27;);

&#x2F;**
 * Default flash formatters.
 *
 * @type Object
 *&#x2F;

var flashFormatters = exports.flashFormatters = {
  s: function(val){
    return String(val);
  }
};

&#x2F;**
 * Return request header or optional default.
 *
 * The &#x60;Referrer&#x60; header field is special-cased,
 * both &#x60;Referrer&#x60; and &#x60;Referer&#x60; will yield are
 * interchangeable.
 *
 * Examples:
 *
 *     req.header(&#x27;Content-Type&#x27;);
 *     &#x2F;&#x2F; =&gt; &quot;text&#x2F;plain&quot;
 *     
 *     req.header(&#x27;content-type&#x27;);
 *     &#x2F;&#x2F; =&gt; &quot;text&#x2F;plain&quot;
 *     
 *     req.header(&#x27;Accept&#x27;);
 *     &#x2F;&#x2F; =&gt; undefined
 *     
 *     req.header(&#x27;Accept&#x27;, &#x27;text&#x2F;html&#x27;);
 *     &#x2F;&#x2F; =&gt; &quot;text&#x2F;html&quot;
 *
 * @param {String} name
 * @param {String} defaultValue
 * @return {String} 
 * @api public
 *&#x2F;

req.header = function(name, defaultValue){
  switch (name = name.toLowerCase()) {
    case &#x27;referer&#x27;:
    case &#x27;referrer&#x27;:
      return this.headers.referrer
        || this.headers.referer
        || defaultValue;
    default:
      return this.headers[name] || defaultValue;
  }
};

&#x2F;**
 * Get &#x60;field&#x60;&#x27;s &#x60;param&#x60; value, defaulting to &#x27;&#x27;.
 *
 * Examples:
 *
 *     req.get(&#x27;content-disposition&#x27;, &#x27;filename&#x27;);
 *     &#x2F;&#x2F; =&gt; &quot;something.png&quot;
 *
 * @param {String} field
 * @param {String} param
 * @return {String}
 * @api public
 *&#x2F;

req.get = function(field, param){
  var val = this.header(field);
  if (!val) return &#x27;&#x27;;
  var regexp = new RegExp(param + &#x27; *= *(?:&quot;([^&quot;]+)&quot;|([^;]+))&#x27;, &#x27;i&#x27;);
  if (!regexp.exec(val)) return &#x27;&#x27;;
  return RegExp.$1 || RegExp.$2;
};

&#x2F;**
 * Short-hand for &#x60;require(&#x27;url&#x27;).parse(req.url).pathname&#x60;.
 *
 * @return {String}
 * @api public
 *&#x2F;

req.__defineGetter__(&#x27;path&#x27;, function(){
  return parse(this.url).pathname;
});

&#x2F;**
 * Check if the _Accept_ header is present, and includes the given &#x60;type&#x60;.
 *
 * When the _Accept_ header is not present &#x60;true&#x60; is returned. Otherwise
 * the given &#x60;type&#x60; is matched by an exact match, and then subtypes. You
 * may pass the subtype such as &quot;html&quot; which is then converted internally
 * to &quot;text&#x2F;html&quot; using the mime lookup table.
 *
 * Examples:
 * 
 *     &#x2F;&#x2F; Accept: text&#x2F;html
 *     req.accepts(&#x27;html&#x27;);
 *     &#x2F;&#x2F; =&gt; true
 *
 *     &#x2F;&#x2F; Accept: text&#x2F;*; application&#x2F;json
 *     req.accepts(&#x27;html&#x27;);
 *     req.accepts(&#x27;text&#x2F;html&#x27;);
 *     req.accepts(&#x27;text&#x2F;plain&#x27;);
 *     req.accepts(&#x27;application&#x2F;json&#x27;);
 *     &#x2F;&#x2F; =&gt; true
 *
 *     req.accepts(&#x27;image&#x2F;png&#x27;);
 *     req.accepts(&#x27;png&#x27;);
 *     &#x2F;&#x2F; =&gt; false
 *
 * @param {String} type
 * @return {Boolean}
 * @api public
 *&#x2F;

req.accepts = function(type){
  var accept = this.header(&#x27;Accept&#x27;);

  &#x2F;&#x2F; normalize extensions &quot;.json&quot; -&gt; &quot;json&quot;
  if (type &amp;&amp; &#x27;.&#x27; == type[0]) type = type.substr(1);

  &#x2F;&#x2F; when Accept does not exist, or is &#x27;*&#x2F;*&#x27; return true 
  if (!accept || &#x27;*&#x2F;*&#x27; == accept) {
    return true;
  } else if (type) {
    &#x2F;&#x2F; allow &quot;html&quot; vs &quot;text&#x2F;html&quot; etc
    if (!~type.indexOf(&#x27;&#x2F;&#x27;)) type = mime.lookup(type);

    &#x2F;&#x2F; check if we have a direct match
    if (~accept.indexOf(type)) return true;

    &#x2F;&#x2F; check if we have type&#x2F;*
    type = type.split(&#x27;&#x2F;&#x27;)[0] + &#x27;&#x2F;*&#x27;;
    return !!~accept.indexOf(type);
  } else {
    return false;
  }
};

&#x2F;**
 * Return the value of param &#x60;name&#x60; when present or &#x60;defaultValue&#x60;.
 *
 *  - Checks route placeholders, ex: _&#x2F;user&#x2F;:id_
 *  - Checks query string params, ex: ?id=12
 *  - Checks urlencoded body params, ex: id=12
 *
 * To utilize urlencoded request bodies, &#x60;req.body&#x60;
 * should be an object. This can be done by using
 * the &#x60;connect.bodyParser&#x60; middleware.
 *
 * @param {String} name
 * @param {Mixed} defaultValue
 * @return {String}
 * @api public
 *&#x2F;

req.param = function(name, defaultValue){
  &#x2F;&#x2F; route params like &#x2F;user&#x2F;:id
  if (this.params &amp;&amp; this.params.hasOwnProperty(name) &amp;&amp; undefined !== this.params[name]) {
    return this.params[name]; 
  }
  &#x2F;&#x2F; query string params
  if (undefined !== this.query[name]) {
    return this.query[name]; 
  }
  &#x2F;&#x2F; request body params via connect.bodyParser
  if (this.body &amp;&amp; undefined !== this.body[name]) {
    return this.body[name];
  }
  return defaultValue;
};

&#x2F;**
 * Queue flash &#x60;msg&#x60; of the given &#x60;type&#x60;.
 *
 * Examples:
 *
 *      req.flash(&#x27;info&#x27;, &#x27;email sent&#x27;);
 *      req.flash(&#x27;error&#x27;, &#x27;email delivery failed&#x27;);
 *      req.flash(&#x27;info&#x27;, &#x27;email re-sent&#x27;);
 *      &#x2F;&#x2F; =&gt; 2
 *
 *      req.flash(&#x27;info&#x27;);
 *      &#x2F;&#x2F; =&gt; [&#x27;email sent&#x27;, &#x27;email re-sent&#x27;]
 *
 *      req.flash(&#x27;info&#x27;);
 *      &#x2F;&#x2F; =&gt; []
 *
 *      req.flash();
 *      &#x2F;&#x2F; =&gt; { error: [&#x27;email delivery failed&#x27;], info: [] }
 *
 * Formatting:
 *
 * Flash notifications also support arbitrary formatting support.
 * For example you may pass variable arguments to &#x60;req.flash()&#x60;
 * and use the %s specifier to be replaced by the associated argument:
 *
 *     req.flash(&#x27;info&#x27;, &#x27;email has been sent to %s.&#x27;, userName);
 *
 * To add custom formatters use the &#x60;exports.flashFormatters&#x60; object.
 *
 * @param {String} type
 * @param {String} msg
 * @return {Array|Object|Number}
 * @api public
 *&#x2F;

req.flash = function(type, msg){
  if (this.session === undefined) throw Error(&#x27;req.flash() requires sessions&#x27;);
  var msgs = this.session.flash = this.session.flash || {};
  if (type &amp;&amp; msg) {
    var i = 2
      , args = arguments
      , formatters = this.app.flashFormatters || {};
    formatters.__proto__ = flashFormatters;
    msg = utils.miniMarkdown(msg);
    msg = msg.replace(&#x2F;%([a-zA-Z])&#x2F;g, function(_, format){
      var formatter = formatters[format];
      if (formatter) return formatter(utils.escape(args[i++]));
    });
    return (msgs[type] = msgs[type] || []).push(msg);
  } else if (type) {
    var arr = msgs[type];
    delete msgs[type];
    return arr || [];
  } else {
    this.session.flash = {};
    return msgs;
  }
};

&#x2F;**
 * Check if the incoming request contains the &quot;Content-Type&quot; 
 * header field, and it contains the give mime &#x60;type&#x60;.
 *
 * Examples:
 *
 *      &#x2F;&#x2F; With Content-Type: text&#x2F;html; charset=utf-8
 *      req.is(&#x27;html&#x27;);
 *      req.is(&#x27;text&#x2F;html&#x27;);
 *      &#x2F;&#x2F; =&gt; true
 *     
 *      &#x2F;&#x2F; When Content-Type is application&#x2F;json
 *      req.is(&#x27;json&#x27;);
 *      req.is(&#x27;application&#x2F;json&#x27;);
 *      &#x2F;&#x2F; =&gt; true
 *     
 *      req.is(&#x27;html&#x27;);
 *      &#x2F;&#x2F; =&gt; false
 * 
 * Ad-hoc callbacks can also be registered with Express, to perform
 * assertions again the request, for example if we need an expressive
 * way to check if our incoming request is an image, we can register &quot;an image&quot;
 * callback:
 * 
 *       app.is(&#x27;an image&#x27;, function(req){
 *         return 0 == req.headers[&#x27;content-type&#x27;].indexOf(&#x27;image&#x27;);
 *       });
 *       
 *  Now within our route callbacks, we can use to to assert content types
 *  such as &quot;image&#x2F;jpeg&quot;, &quot;image&#x2F;png&quot;, etc.
 * 
 *      app.post(&#x27;&#x2F;image&#x2F;upload&#x27;, function(req, res, next){
 *        if (req.is(&#x27;an image&#x27;)) {
 *          &#x2F;&#x2F; do something
 *        } else {
 *          next();
 *        }
 *      });
 * 
 * @param {String} type
 * @return {Boolean}
 * @api public
 *&#x2F;

req.is = function(type){
  var fn = this.app.is(type);
  if (fn) return fn(this);
  var ct = this.headers[&#x27;content-type&#x27;];
  if (!ct) return false;
  ct = ct.split(&#x27;;&#x27;)[0];
  if (!~type.indexOf(&#x27;&#x2F;&#x27;)) type = mime.lookup(type);
  if (~type.indexOf(&#x27;*&#x27;)) {
    type = type.split(&#x27;&#x2F;&#x27;);
    ct = ct.split(&#x27;&#x2F;&#x27;);
    if (&#x27;*&#x27; == type[0] &amp;&amp; type[1] == ct[1]) return true;
    if (&#x27;*&#x27; == type[1] &amp;&amp; type[0] == ct[0]) return true;
    return false;
  }
  return !! ~ct.indexOf(type);
};

&#x2F;&#x2F; Callback for isXMLHttpRequest &#x2F; xhr

function isxhr() {
  return this.header(&#x27;X-Requested-With&#x27;, &#x27;&#x27;).toLowerCase() === &#x27;xmlhttprequest&#x27;;
}

&#x2F;**
 * Check if the request was an _XMLHttpRequest_.
 *
 * @return {Boolean}
 * @api public
 *&#x2F;

req.__defineGetter__(&#x27;isXMLHttpRequest&#x27;, isxhr);
req.__defineGetter__(&#x27;xhr&#x27;, isxhr);

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>
