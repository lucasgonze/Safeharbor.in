<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>node_modules&#x2F;express&#x2F;lib&#x2F;http.js</title>
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.5.1&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="..&#x2F;assets/favicon.png">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;combo?3.5.1&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="..&#x2F;assets/css/logo.png" title=""></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/Enables filtering in class lists..html">Enables filtering in class lists.</a></li>
            
                <li><a href="..&#x2F;classes/Namespace container for the JsWorld library objects..Class for localised formatting of currency amounts.

&lt;p&gt;See: &lt;a href=&quot;http:&#x2F;&#x2F;www.opengroup.org&#x2F;onlinepubs&#x2F;009695399&#x2F;basedefs&#x2F;xbd_chap07.html#tag_07_03_03&quot;&gt;
POSIX LC_MONETARY&lt;&#x2F;a&gt;..html">Namespace container for the JsWorld library objects..Class for localised formatting of currency amounts.

&lt;p&gt;See: &lt;a href=&quot;http:&#x2F;&#x2F;www.opengroup.org&#x2F;onlinepubs&#x2F;009695399&#x2F;basedefs&#x2F;xbd_chap07.html#tag_07_03_03&quot;&gt;
POSIX LC_MONETARY&lt;&#x2F;a&gt;.</a></li>
            
                <li><a href="..&#x2F;classes/Namespace container for the JsWorld library objects..Class for localised formatting of dates and times.

&lt;p&gt;See: &lt;a href=&quot;http:&#x2F;&#x2F;www.opengroup.org&#x2F;onlinepubs&#x2F;000095399&#x2F;basedefs&#x2F;xbd_chap07.html#tag_07_03_05&quot;&gt;
POSIX LC_TIME&lt;&#x2F;a&gt;..html">Namespace container for the JsWorld library objects..Class for localised formatting of dates and times.

&lt;p&gt;See: &lt;a href=&quot;http:&#x2F;&#x2F;www.opengroup.org&#x2F;onlinepubs&#x2F;000095399&#x2F;basedefs&#x2F;xbd_chap07.html#tag_07_03_05&quot;&gt;
POSIX LC_TIME&lt;&#x2F;a&gt;.</a></li>
            
                <li><a href="..&#x2F;classes/Namespace container for the JsWorld library objects..Class for localised formatting of numbers.

&lt;p&gt;See: &lt;a href=&quot;http:&#x2F;&#x2F;www.opengroup.org&#x2F;onlinepubs&#x2F;000095399&#x2F;basedefs&#x2F;xbd_chap07.html#tag_07_03_04&quot;&gt;
POSIX LC_NUMERIC&lt;&#x2F;a&gt;..html">Namespace container for the JsWorld library objects..Class for localised formatting of numbers.

&lt;p&gt;See: &lt;a href=&quot;http:&#x2F;&#x2F;www.opengroup.org&#x2F;onlinepubs&#x2F;000095399&#x2F;basedefs&#x2F;xbd_chap07.html#tag_07_03_04&quot;&gt;
POSIX LC_NUMERIC&lt;&#x2F;a&gt;.</a></li>
            
                <li><a href="..&#x2F;classes/Namespace container for the JsWorld library objects..Class for parsing localised currency amount strings..html">Namespace container for the JsWorld library objects..Class for parsing localised currency amount strings.</a></li>
            
                <li><a href="..&#x2F;classes/Namespace container for the JsWorld library objects..Class for parsing localised date and time strings..html">Namespace container for the JsWorld library objects..Class for parsing localised date and time strings.</a></li>
            
                <li><a href="..&#x2F;classes/Namespace container for the JsWorld library objects..Class for parsing localised number strings..html">Namespace container for the JsWorld library objects..Class for parsing localised number strings.</a></li>
            
                <li><a href="..&#x2F;classes/Namespace container for the JsWorld library objects..Represents a POSIX-style locale with its numeric, monetary and date&#x2F;time 
properties. Also provides a set of locale helper methods.

&lt;p&gt;The locale properties follow the POSIX standards:

&lt;ul&gt;
    &lt;li&gt;&lt;a href=&quot;http:&#x2F;&#x2F;www.opengroup.org&#x2F;onlinepubs&#x2F;000095399&#x2F;basedefs&#x2F;xbd_chap07.html#tag_07_03_04&quot;&gt;POSIX LC_NUMERIC&lt;&#x2F;a&gt;
    &lt;li&gt;&lt;a href=&quot;http:&#x2F;&#x2F;www.opengroup.org&#x2F;onlinepubs&#x2F;009695399&#x2F;basedefs&#x2F;xbd_chap07.html#tag_07_03_03&quot;&gt;POSIX LC_MONETARY&lt;&#x2F;a&gt;
    &lt;li&gt;&lt;a href=&quot;http:&#x2F;&#x2F;www.opengroup.org&#x2F;onlinepubs&#x2F;000095399&#x2F;basedefs&#x2F;xbd_chap07.html#tag_07_03_05&quot;&gt;POSIX LC_TIME&lt;&#x2F;a&gt;
&lt;&#x2F;ul&gt;.html">Namespace container for the JsWorld library objects..Represents a POSIX-style locale with its numeric, monetary and date&#x2F;time 
properties. Also provides a set of locale helper methods.

&lt;p&gt;The locale properties follow the POSIX standards:

&lt;ul&gt;
    &lt;li&gt;&lt;a href=&quot;http:&#x2F;&#x2F;www.opengroup.org&#x2F;onlinepubs&#x2F;000095399&#x2F;basedefs&#x2F;xbd_chap07.html#tag_07_03_04&quot;&gt;POSIX LC_NUMERIC&lt;&#x2F;a&gt;
    &lt;li&gt;&lt;a href=&quot;http:&#x2F;&#x2F;www.opengroup.org&#x2F;onlinepubs&#x2F;009695399&#x2F;basedefs&#x2F;xbd_chap07.html#tag_07_03_03&quot;&gt;POSIX LC_MONETARY&lt;&#x2F;a&gt;
    &lt;li&gt;&lt;a href=&quot;http:&#x2F;&#x2F;www.opengroup.org&#x2F;onlinepubs&#x2F;000095399&#x2F;basedefs&#x2F;xbd_chap07.html#tag_07_03_05&quot;&gt;POSIX LC_TIME&lt;&#x2F;a&gt;
&lt;&#x2F;ul&gt;</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: node_modules&#x2F;express&#x2F;lib&#x2F;http.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
&#x2F;*!
 * Express - HTTPServer
 * Copyright(c) 2010 TJ Holowaychuk &lt;tj@vision-media.ca&gt;
 * MIT Licensed
 *&#x2F;

&#x2F;**
 * Module dependencies.
 *&#x2F;

var qs = require(&#x27;qs&#x27;)
  , connect = require(&#x27;connect&#x27;)
  , router = require(&#x27;.&#x2F;router&#x27;)
  , Router = require(&#x27;.&#x2F;router&#x27;)
  , view = require(&#x27;.&#x2F;view&#x27;)
  , toArray = require(&#x27;.&#x2F;utils&#x27;).toArray
  , methods = router.methods.concat(&#x27;del&#x27;, &#x27;all&#x27;)
  , url = require(&#x27;url&#x27;)
  , utils = connect.utils;

&#x2F;**
 * Expose &#x60;HTTPServer&#x60;.
 *&#x2F;

exports = module.exports = HTTPServer;

&#x2F;**
 * Server proto.
 *&#x2F;

var app = HTTPServer.prototype;

&#x2F;**
 * Initialize a new &#x60;HTTPServer&#x60; with optional &#x60;middleware&#x60;.
 *
 * @param {Array} middleware
 * @api public
 *&#x2F;

function HTTPServer(middleware){
  connect.HTTPServer.call(this, []);
  this.init(middleware);
};

&#x2F;**
 * Inherit from &#x60;connect.HTTPServer&#x60;.
 *&#x2F;

app.__proto__ = connect.HTTPServer.prototype;

&#x2F;**
 * Initialize the server.
 *
 * @param {Array} middleware
 * @api private
 *&#x2F;

app.init = function(middleware){
  var self = this;
  this.cache = {};
  this.settings = {};
  this.redirects = {};
  this.isCallbacks = {};
  this._locals = {};
  this.dynamicViewHelpers = {};
  this.errorHandlers = [];

  this.set(&#x27;env&#x27;, process.env.NODE_ENV || &#x27;development&#x27;);

  &#x2F;&#x2F; expose objects to each other
  this.use(function(req, res, next){
    req.query = req.query || {};
    res.setHeader(&#x27;X-Powered-By&#x27;, &#x27;Express&#x27;);
    req.app = res.app = self;
    req.res = res;
    res.req = req;
    req.next = next;
    &#x2F;&#x2F; assign req.query
    if (req.url.indexOf(&#x27;?&#x27;) &gt; 0) {
      var query = url.parse(req.url).query;
      req.query = qs.parse(query);
    }
    next();
  });

  &#x2F;&#x2F; apply middleware
  if (middleware) middleware.forEach(self.use.bind(self));

  &#x2F;&#x2F; router
  this.routes = new Router(this);
  this.__defineGetter__(&#x27;router&#x27;, function(){
    this.__usedRouter = true;
    return self.routes.middleware;
  });

  &#x2F;&#x2F; default locals
  this.locals({
      settings: this.settings
    , app: this
  });

  &#x2F;&#x2F; default development configuration
  this.configure(&#x27;development&#x27;, function(){
    this.enable(&#x27;hints&#x27;);
  });

  &#x2F;&#x2F; default production configuration
  this.configure(&#x27;production&#x27;, function(){
    this.enable(&#x27;view cache&#x27;);
  });

  &#x2F;&#x2F; register error handlers on &quot;listening&quot;
  &#x2F;&#x2F; so that they disregard definition position.
  this.on(&#x27;listening&#x27;, this.registerErrorHandlers.bind(this));

  &#x2F;&#x2F; route manipulation methods
  methods.forEach(function(method){
    self.lookup[method] = function(path){
      return self.routes.lookup(method, path);
    };

    self.match[method] = function(path){
      return self.routes.match(method, path);
    };

    self.remove[method] = function(path){
      return self.routes.lookup(method, path).remove();
    };
  });

  &#x2F;&#x2F; del -&gt; delete
  self.lookup.del = self.lookup.delete;
  self.match.del = self.match.delete;
  self.remove.del = self.remove.delete;
};

&#x2F;**
 * Remove routes matching the given &#x60;path&#x60;.
 *
 * @param {Route} path
 * @return {Boolean}
 * @api public
 *&#x2F;

app.remove = function(path){
  return this.routes.lookup(&#x27;all&#x27;, path).remove();
};

&#x2F;**
 * Lookup routes defined with a path
 * equivalent to &#x60;path&#x60;.
 *
 * @param {Stirng} path
 * @return {Array}
 * @api public
 *&#x2F;

app.lookup = function(path){
  return this.routes.lookup(&#x27;all&#x27;, path);
};

&#x2F;**
 * Lookup routes matching the given &#x60;url&#x60;.
 *
 * @param {Stirng} url
 * @return {Array}
 * @api public
 *&#x2F;

app.match = function(url){
  return this.routes.match(&#x27;all&#x27;, url);
};

&#x2F;**
 * When using the vhost() middleware register error handlers.
 *&#x2F;

app.onvhost = function(){
  this.registerErrorHandlers();
};

&#x2F;**
 * Register error handlers.
 *
 * @return {Server} for chaining
 * @api public
 *&#x2F;

app.registerErrorHandlers = function(){
  this.errorHandlers.forEach(function(fn){
    this.use(function(err, req, res, next){
      fn.apply(this, arguments);
    });
  }, this);
  return this;
};

&#x2F;**
 * Proxy &#x60;connect.HTTPServer#use()&#x60; to apply settings to
 * mounted applications.
 *
 * @param {String|Function|Server} route
 * @param {Function|Server} middleware
 * @return {Server} for chaining
 * @api public
 *&#x2F;

app.use = function(route, middleware){
  var app, base, handle;

  if (&#x27;string&#x27; != typeof route) {
    middleware = route, route = &#x27;&#x2F;&#x27;;
  }

  &#x2F;&#x2F; express app
  if (middleware.handle &amp;&amp; middleware.set) app = middleware;

  &#x2F;&#x2F; restore .app property on req and res
  if (app) {
    app.route = route;
    middleware = function(req, res, next) {
      var orig = req.app;
      app.handle(req, res, function(err){
        req.app = res.app = orig;
        next(err);
      });
    };
  }

  connect.HTTPServer.prototype.use.call(this, route, middleware);

  &#x2F;&#x2F; mounted an app, invoke the hook
  &#x2F;&#x2F; and adjust some settings
  if (app) {
    base = this.set(&#x27;basepath&#x27;) || this.route;
    if (&#x27;&#x2F;&#x27; == base) base = &#x27;&#x27;;
    base = base + (app.set(&#x27;basepath&#x27;) || app.route);
    app.set(&#x27;basepath&#x27;, base);
    app.parent = this;
    if (app.__mounted) app.__mounted.call(app, this);
  }

  return this;
};

&#x2F;**
 * Assign a callback &#x60;fn&#x60; which is called
 * when this &#x60;Server&#x60; is passed to &#x60;Server#use()&#x60;.
 *
 * Examples:
 *
 *    var app = express.createServer()
 *      , blog = express.createServer();
 *
 *    blog.mounted(function(parent){
 *      &#x2F;&#x2F; parent is app
 *      &#x2F;&#x2F; &quot;this&quot; is blog
 *    });
 *
 *    app.use(blog);
 *
 * @param {Function} fn
 * @return {Server} for chaining
 * @api public
 *&#x2F;

app.mounted = function(fn){
  this.__mounted = fn;
  return this;
};

&#x2F;**
 * See: view.register.
 *
 * @return {Server} for chaining
 * @api public
 *&#x2F;

app.register = function(){
  view.register.apply(this, arguments);
  return this;
};

&#x2F;**
 * Register the given view helpers &#x60;obj&#x60;. This method
 * can be called several times to apply additional helpers.
 *
 * @param {Object} obj
 * @return {Server} for chaining
 * @api public
 *&#x2F;

app.helpers =
app.locals = function(obj){
  utils.merge(this._locals, obj);
  return this;
};

&#x2F;**
 * Register the given dynamic view helpers &#x60;obj&#x60;. This method
 * can be called several times to apply additional helpers.
 *
 * @param {Object} obj
 * @return {Server} for chaining
 * @api public
 *&#x2F;

app.dynamicHelpers = function(obj){
  utils.merge(this.dynamicViewHelpers, obj);
  return this;
};

&#x2F;**
 * Map the given param placeholder &#x60;name&#x60;(s) to the given callback(s).
 *
 * Param mapping is used to provide pre-conditions to routes
 * which us normalized placeholders. This callback has the same
 * signature as regular middleware, for example below when &quot;:userId&quot;
 * is used this function will be invoked in an attempt to load the user.
 *
 *      app.param(&#x27;userId&#x27;, function(req, res, next, id){
 *        User.find(id, function(err, user){
 *          if (err) {
 *            next(err);
 *          } else if (user) {
 *            req.user = user;
 *            next();
 *          } else {
 *            next(new Error(&#x27;failed to load user&#x27;));
 *          }
 *        });
 *      });
 *
 * Passing a single function allows you to map logic
 * to the values passed to &#x60;app.param()&#x60;, for example
 * this is useful to provide coercion support in a concise manner.
 *
 * The following example maps regular expressions to param values
 * ensuring that they match, otherwise passing control to the next
 * route:
 *
 *      app.param(function(name, regexp){
 *        if (regexp instanceof RegExp) {
 *          return function(req, res, next, val){
 *            var captures;
 *            if (captures = regexp.exec(String(val))) {
 *              req.params[name] = captures;
 *              next();
 *            } else {
 *              next(&#x27;route&#x27;);
 *            }
 *          }
 *        }
 *      });
 *
 * We can now use it as shown below, where &quot;&#x2F;commit&#x2F;:commit&quot; expects
 * that the value for &quot;:commit&quot; is at 5 or more digits. The capture
 * groups are then available as &#x60;req.params.commit&#x60; as we defined
 * in the function above.
 *
 *    app.param(&#x27;commit&#x27;, &#x2F;^\d{5,}$&#x2F;);
 *
 * For more of this useful functionality take a look
 * at [express-params](http:&#x2F;&#x2F;github.com&#x2F;visionmedia&#x2F;express-params).
 *
 * @param {String|Array|Function} name
 * @param {Function} fn
 * @return {Server} for chaining
 * @api public
 *&#x2F;

app.param = function(name, fn){
  var self = this
    , fns = [].slice.call(arguments, 1);

  &#x2F;&#x2F; array
  if (Array.isArray(name)) {
    name.forEach(function(name){
      fns.forEach(function(fn){
        self.param(name, fn);
      });
    });
  &#x2F;&#x2F; param logic
  } else if (&#x27;function&#x27; == typeof name) {
    this.routes.param(name);
  &#x2F;&#x2F; single
  } else {
    if (&#x27;:&#x27; == name[0]) name = name.substr(1);
    fns.forEach(function(fn){
      self.routes.param(name, fn);
    });
  }

  return this;
};

&#x2F;**
 * Assign a custom exception handler callback &#x60;fn&#x60;.
 * These handlers are always _last_ in the middleware stack.
 *
 * @param {Function} fn
 * @return {Server} for chaining
 * @api public
 *&#x2F;

app.error = function(fn){
  this.errorHandlers.push(fn);
  return this;
};

&#x2F;**
 * Register the given callback &#x60;fn&#x60; for the given &#x60;type&#x60;.
 *
 * @param {String} type
 * @param {Function} fn
 * @return {Server} for chaining
 * @api public
 *&#x2F;

app.is = function(type, fn){
  if (!fn) return this.isCallbacks[type];
  this.isCallbacks[type] = fn;
  return this;
};

&#x2F;**
 * Assign &#x60;setting&#x60; to &#x60;val&#x60;, or return &#x60;setting&#x60;&#x27;s value.
 * Mounted servers inherit their parent server&#x27;s settings.
 *
 * @param {String} setting
 * @param {String} val
 * @return {Server|Mixed} for chaining, or the setting value
 * @api public
 *&#x2F;

app.set = function(setting, val){
  if (val === undefined) {
    if (this.settings.hasOwnProperty(setting)) {
      return this.settings[setting];
    } else if (this.parent) {
      return this.parent.set(setting);
    }
  } else {
    this.settings[setting] = val;
    return this;
  }
};

&#x2F;**
 * Check if &#x60;setting&#x60; is enabled.
 *
 * @param {String} setting
 * @return {Boolean}
 * @api public
 *&#x2F;

app.enabled = function(setting){
  return !!this.set(setting);
};

&#x2F;**
 * Check if &#x60;setting&#x60; is disabled.
 *
 * @param {String} setting
 * @return {Boolean}
 * @api public
 *&#x2F;

app.disabled = function(setting){
  return !this.set(setting);
};

&#x2F;**
 * Enable &#x60;setting&#x60;.
 *
 * @param {String} setting
 * @return {Server} for chaining
 * @api public
 *&#x2F;

app.enable = function(setting){
  return this.set(setting, true);
};

&#x2F;**
 * Disable &#x60;setting&#x60;.
 *
 * @param {String} setting
 * @return {Server} for chaining
 * @api public
 *&#x2F;

app.disable = function(setting){
  return this.set(setting, false);
};

&#x2F;**
 * Redirect &#x60;key&#x60; to &#x60;url&#x60;.
 *
 * @param {String} key
 * @param {String} url
 * @return {Server} for chaining
 * @api public
 *&#x2F;

app.redirect = function(key, url){
  this.redirects[key] = url;
  return this;
};

&#x2F;**
 * Configure callback for zero or more envs,
 * when no env is specified that callback will
 * be invoked for all environments. Any combination
 * can be used multiple times, in any order desired.
 *
 * Examples:
 *
 *    app.configure(function(){
 *      &#x2F;&#x2F; executed for all envs
 *    });
 *
 *    app.configure(&#x27;stage&#x27;, function(){
 *      &#x2F;&#x2F; executed staging env
 *    });
 *
 *    app.configure(&#x27;stage&#x27;, &#x27;production&#x27;, function(){
 *      &#x2F;&#x2F; executed for stage and production
 *    });
 *
 * @param {String} env...
 * @param {Function} fn
 * @return {Server} for chaining
 * @api public
 *&#x2F;

app.configure = function(env, fn){
  var envs = &#x27;all&#x27;
    , args = toArray(arguments);
  fn = args.pop();
  if (args.length) envs = args;
  if (&#x27;all&#x27; == envs || ~envs.indexOf(this.settings.env)) fn.call(this);
  return this;
};

&#x2F;**
 * Delegate &#x60;.VERB(...)&#x60; calls to &#x60;.route(VERB, ...)&#x60;.
 *&#x2F;

methods.forEach(function(method){
  app[method] = function(path){
    if (1 == arguments.length) return this.routes.lookup(method, path);
    var args = [method].concat(toArray(arguments));
    if (!this.__usedRouter) this.use(this.router);
    return this.routes._route.apply(this.routes, args);
  }
});

&#x2F;**
 * Special-cased &quot;all&quot; method, applying the given route &#x60;path&#x60;,
 * middleware, and callback to _every_ HTTP method.
 *
 * @param {String} path
 * @param {Function} ...
 * @return {Server} for chaining
 * @api public
 *&#x2F;

app.all = function(path){
  var args = arguments;
  if (1 == args.length) return this.routes.lookup(&#x27;all&#x27;, path);
  methods.forEach(function(method){
    if (&#x27;all&#x27; == method || &#x27;del&#x27; == method) return;
    app[method].apply(this, args);
  }, this);
  return this;
};

&#x2F;&#x2F; del -&gt; delete alias

app.del = app.delete;


    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>
