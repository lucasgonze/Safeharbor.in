<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>node_modules&#x2F;express&#x2F;lib&#x2F;view&#x2F;view.js</title>
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.5.1&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="..&#x2F;assets/favicon.png">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;combo?3.5.1&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="..&#x2F;assets/css/logo.png" title=""></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/Enables filtering in class lists..html">Enables filtering in class lists.</a></li>
            
                <li><a href="..&#x2F;classes/Namespace container for the JsWorld library objects..Class for localised formatting of currency amounts.

&lt;p&gt;See: &lt;a href=&quot;http:&#x2F;&#x2F;www.opengroup.org&#x2F;onlinepubs&#x2F;009695399&#x2F;basedefs&#x2F;xbd_chap07.html#tag_07_03_03&quot;&gt;
POSIX LC_MONETARY&lt;&#x2F;a&gt;..html">Namespace container for the JsWorld library objects..Class for localised formatting of currency amounts.

&lt;p&gt;See: &lt;a href=&quot;http:&#x2F;&#x2F;www.opengroup.org&#x2F;onlinepubs&#x2F;009695399&#x2F;basedefs&#x2F;xbd_chap07.html#tag_07_03_03&quot;&gt;
POSIX LC_MONETARY&lt;&#x2F;a&gt;.</a></li>
            
                <li><a href="..&#x2F;classes/Namespace container for the JsWorld library objects..Class for localised formatting of dates and times.

&lt;p&gt;See: &lt;a href=&quot;http:&#x2F;&#x2F;www.opengroup.org&#x2F;onlinepubs&#x2F;000095399&#x2F;basedefs&#x2F;xbd_chap07.html#tag_07_03_05&quot;&gt;
POSIX LC_TIME&lt;&#x2F;a&gt;..html">Namespace container for the JsWorld library objects..Class for localised formatting of dates and times.

&lt;p&gt;See: &lt;a href=&quot;http:&#x2F;&#x2F;www.opengroup.org&#x2F;onlinepubs&#x2F;000095399&#x2F;basedefs&#x2F;xbd_chap07.html#tag_07_03_05&quot;&gt;
POSIX LC_TIME&lt;&#x2F;a&gt;.</a></li>
            
                <li><a href="..&#x2F;classes/Namespace container for the JsWorld library objects..Class for localised formatting of numbers.

&lt;p&gt;See: &lt;a href=&quot;http:&#x2F;&#x2F;www.opengroup.org&#x2F;onlinepubs&#x2F;000095399&#x2F;basedefs&#x2F;xbd_chap07.html#tag_07_03_04&quot;&gt;
POSIX LC_NUMERIC&lt;&#x2F;a&gt;..html">Namespace container for the JsWorld library objects..Class for localised formatting of numbers.

&lt;p&gt;See: &lt;a href=&quot;http:&#x2F;&#x2F;www.opengroup.org&#x2F;onlinepubs&#x2F;000095399&#x2F;basedefs&#x2F;xbd_chap07.html#tag_07_03_04&quot;&gt;
POSIX LC_NUMERIC&lt;&#x2F;a&gt;.</a></li>
            
                <li><a href="..&#x2F;classes/Namespace container for the JsWorld library objects..Class for parsing localised currency amount strings..html">Namespace container for the JsWorld library objects..Class for parsing localised currency amount strings.</a></li>
            
                <li><a href="..&#x2F;classes/Namespace container for the JsWorld library objects..Class for parsing localised date and time strings..html">Namespace container for the JsWorld library objects..Class for parsing localised date and time strings.</a></li>
            
                <li><a href="..&#x2F;classes/Namespace container for the JsWorld library objects..Class for parsing localised number strings..html">Namespace container for the JsWorld library objects..Class for parsing localised number strings.</a></li>
            
                <li><a href="..&#x2F;classes/Namespace container for the JsWorld library objects..Represents a POSIX-style locale with its numeric, monetary and date&#x2F;time 
properties. Also provides a set of locale helper methods.

&lt;p&gt;The locale properties follow the POSIX standards:

&lt;ul&gt;
    &lt;li&gt;&lt;a href=&quot;http:&#x2F;&#x2F;www.opengroup.org&#x2F;onlinepubs&#x2F;000095399&#x2F;basedefs&#x2F;xbd_chap07.html#tag_07_03_04&quot;&gt;POSIX LC_NUMERIC&lt;&#x2F;a&gt;
    &lt;li&gt;&lt;a href=&quot;http:&#x2F;&#x2F;www.opengroup.org&#x2F;onlinepubs&#x2F;009695399&#x2F;basedefs&#x2F;xbd_chap07.html#tag_07_03_03&quot;&gt;POSIX LC_MONETARY&lt;&#x2F;a&gt;
    &lt;li&gt;&lt;a href=&quot;http:&#x2F;&#x2F;www.opengroup.org&#x2F;onlinepubs&#x2F;000095399&#x2F;basedefs&#x2F;xbd_chap07.html#tag_07_03_05&quot;&gt;POSIX LC_TIME&lt;&#x2F;a&gt;
&lt;&#x2F;ul&gt;.html">Namespace container for the JsWorld library objects..Represents a POSIX-style locale with its numeric, monetary and date&#x2F;time 
properties. Also provides a set of locale helper methods.

&lt;p&gt;The locale properties follow the POSIX standards:

&lt;ul&gt;
    &lt;li&gt;&lt;a href=&quot;http:&#x2F;&#x2F;www.opengroup.org&#x2F;onlinepubs&#x2F;000095399&#x2F;basedefs&#x2F;xbd_chap07.html#tag_07_03_04&quot;&gt;POSIX LC_NUMERIC&lt;&#x2F;a&gt;
    &lt;li&gt;&lt;a href=&quot;http:&#x2F;&#x2F;www.opengroup.org&#x2F;onlinepubs&#x2F;009695399&#x2F;basedefs&#x2F;xbd_chap07.html#tag_07_03_03&quot;&gt;POSIX LC_MONETARY&lt;&#x2F;a&gt;
    &lt;li&gt;&lt;a href=&quot;http:&#x2F;&#x2F;www.opengroup.org&#x2F;onlinepubs&#x2F;000095399&#x2F;basedefs&#x2F;xbd_chap07.html#tag_07_03_05&quot;&gt;POSIX LC_TIME&lt;&#x2F;a&gt;
&lt;&#x2F;ul&gt;</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: node_modules&#x2F;express&#x2F;lib&#x2F;view&#x2F;view.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">

&#x2F;*!
 * Express - View
 * Copyright(c) 2010 TJ Holowaychuk &lt;tj@vision-media.ca&gt;
 * MIT Licensed
 *&#x2F;

&#x2F;**
 * Module dependencies.
 *&#x2F;

var path = require(&#x27;path&#x27;)
  , utils = require(&#x27;..&#x2F;utils&#x27;)
  , extname = path.extname
  , dirname = path.dirname
  , basename = path.basename
  , fs = require(&#x27;fs&#x27;)
  , stat = fs.statSync;

&#x2F;**
 * Expose &#x60;View&#x60;.
 *&#x2F;

exports = module.exports = View;

&#x2F;**
 * Require cache.
 *&#x2F;

var cache = {};

&#x2F;**
 * Initialize a new &#x60;View&#x60; with the given &#x60;view&#x60; path and &#x60;options&#x60;.
 *
 * @param {String} view
 * @param {Object} options
 * @api private
 *&#x2F;

function View(view, options) {
  options = options || {};
  this.view = view;
  this.root = options.root;
  this.relative = false !== options.relative;
  this.defaultEngine = options.defaultEngine;
  this.parent = options.parentView;
  this.basename = basename(view);
  this.engine = this.resolveEngine();
  this.extension = &#x27;.&#x27; + this.engine;
  this.name = this.basename.replace(this.extension, &#x27;&#x27;);
  this.path = this.resolvePath();
  this.dirname = dirname(this.path);
  if (options.attempts) {
    if (!~options.attempts.indexOf(this.path))
      options.attempts.push(this.path);
  }
};

&#x2F;**
 * Check if the view path exists.
 *
 * @return {Boolean}
 * @api public
 *&#x2F;

View.prototype.__defineGetter__(&#x27;exists&#x27;, function(){
  try {
    stat(this.path);
    return true;
  } catch (err) {
    return false;
  }
});

&#x2F;**
 * Resolve view engine.
 *
 * @return {String}
 * @api private
 *&#x2F;

View.prototype.resolveEngine = function(){
  &#x2F;&#x2F; Explicit
  if (~this.basename.indexOf(&#x27;.&#x27;)) return extname(this.basename).substr(1);
  &#x2F;&#x2F; Inherit from parent
  if (this.parent) return this.parent.engine;
  &#x2F;&#x2F; Default
  return this.defaultEngine;
};

&#x2F;**
 * Resolve view path.
 *
 * @return {String}
 * @api private
 *&#x2F;

View.prototype.resolvePath = function(){
  var path = this.view;
  &#x2F;&#x2F; Implicit engine
  if (!~this.basename.indexOf(&#x27;.&#x27;)) path += this.extension;
  &#x2F;&#x2F; Absolute
  if (utils.isAbsolute(path)) return path;
  &#x2F;&#x2F; Relative to parent
  if (this.relative &amp;&amp; this.parent) return this.parent.dirname + &#x27;&#x2F;&#x27; + path;
  &#x2F;&#x2F; Relative to root
  return this.root
    ? this.root + &#x27;&#x2F;&#x27; + path
    : path;
};

&#x2F;**
 * Get view contents. This is a one-time hit, so we
 * can afford to be sync.
 *
 * @return {String}
 * @api public
 *&#x2F;

View.prototype.__defineGetter__(&#x27;contents&#x27;, function(){
  return fs.readFileSync(this.path, &#x27;utf8&#x27;);
});

&#x2F;**
 * Get template engine api, cache exports to reduce
 * require() calls.
 *
 * @return {Object}
 * @api public
 *&#x2F;

View.prototype.__defineGetter__(&#x27;templateEngine&#x27;, function(){
  var ext = this.extension;
  return cache[ext] || (cache[ext] = require(this.engine));
});

&#x2F;**
 * Return root path alternative.
 *
 * @return {String}
 * @api public
 *&#x2F;

View.prototype.__defineGetter__(&#x27;rootPath&#x27;, function(){
  this.relative = false;
  return this.resolvePath();
});

&#x2F;**
 * Return index path alternative.
 *
 * @return {String}
 * @api public
 *&#x2F;

View.prototype.__defineGetter__(&#x27;indexPath&#x27;, function(){
  return this.dirname
    + &#x27;&#x2F;&#x27; + this.basename.replace(this.extension, &#x27;&#x27;)
    + &#x27;&#x2F;index&#x27; + this.extension;
});

&#x2F;**
 * Return ..&#x2F;&lt;name&gt;&#x2F;index path alternative.
 *
 * @return {String}
 * @api public
 *&#x2F;

View.prototype.__defineGetter__(&#x27;upIndexPath&#x27;, function(){
  return this.dirname + &#x27;&#x2F;..&#x2F;&#x27; + this.name + &#x27;&#x2F;index&#x27; + this.extension;
});

&#x2F;**
 * Return _ prefix path alternative
 *
 * @return {String}
 * @api public
 *&#x2F;

View.prototype.__defineGetter__(&#x27;prefixPath&#x27;, function(){
  return this.dirname + &#x27;&#x2F;_&#x27; + this.basename;
});

&#x2F;**
 * Register the given template engine &#x60;exports&#x60;
 * as &#x60;ext&#x60;. For example we may wish to map &quot;.html&quot;
 * files to jade:
 *
 *    app.register(&#x27;.html&#x27;, require(&#x27;jade&#x27;));
 *
 * or
 *
 *    app.register(&#x27;html&#x27;, require(&#x27;jade&#x27;));
 *
 * This is also useful for libraries that may not
 * match extensions correctly. For example my haml.js
 * library is installed from npm as &quot;hamljs&quot; so instead
 * of layout.hamljs, we can register the engine as &quot;.haml&quot;:
 *
 *    app.register(&#x27;.haml&#x27;, require(&#x27;haml-js&#x27;));
 *
 * @param {String} ext
 * @param {Object} obj
 * @api public
 *&#x2F;

exports.register = function(ext, exports) {
  if (&#x27;.&#x27; != ext[0]) ext = &#x27;.&#x27; + ext;
  cache[ext] = exports;
};

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>
