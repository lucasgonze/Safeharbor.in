<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>node_modules&#x2F;express&#x2F;node_modules&#x2F;connect&#x2F;lib&#x2F;middleware&#x2F;logger.js</title>
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.5.1&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="..&#x2F;assets/favicon.png">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;combo?3.5.1&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="..&#x2F;assets/css/logo.png" title=""></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/Enables filtering in class lists..html">Enables filtering in class lists.</a></li>
            
                <li><a href="..&#x2F;classes/Namespace container for the JsWorld library objects..Class for localised formatting of currency amounts.

&lt;p&gt;See: &lt;a href=&quot;http:&#x2F;&#x2F;www.opengroup.org&#x2F;onlinepubs&#x2F;009695399&#x2F;basedefs&#x2F;xbd_chap07.html#tag_07_03_03&quot;&gt;
POSIX LC_MONETARY&lt;&#x2F;a&gt;..html">Namespace container for the JsWorld library objects..Class for localised formatting of currency amounts.

&lt;p&gt;See: &lt;a href=&quot;http:&#x2F;&#x2F;www.opengroup.org&#x2F;onlinepubs&#x2F;009695399&#x2F;basedefs&#x2F;xbd_chap07.html#tag_07_03_03&quot;&gt;
POSIX LC_MONETARY&lt;&#x2F;a&gt;.</a></li>
            
                <li><a href="..&#x2F;classes/Namespace container for the JsWorld library objects..Class for localised formatting of dates and times.

&lt;p&gt;See: &lt;a href=&quot;http:&#x2F;&#x2F;www.opengroup.org&#x2F;onlinepubs&#x2F;000095399&#x2F;basedefs&#x2F;xbd_chap07.html#tag_07_03_05&quot;&gt;
POSIX LC_TIME&lt;&#x2F;a&gt;..html">Namespace container for the JsWorld library objects..Class for localised formatting of dates and times.

&lt;p&gt;See: &lt;a href=&quot;http:&#x2F;&#x2F;www.opengroup.org&#x2F;onlinepubs&#x2F;000095399&#x2F;basedefs&#x2F;xbd_chap07.html#tag_07_03_05&quot;&gt;
POSIX LC_TIME&lt;&#x2F;a&gt;.</a></li>
            
                <li><a href="..&#x2F;classes/Namespace container for the JsWorld library objects..Class for localised formatting of numbers.

&lt;p&gt;See: &lt;a href=&quot;http:&#x2F;&#x2F;www.opengroup.org&#x2F;onlinepubs&#x2F;000095399&#x2F;basedefs&#x2F;xbd_chap07.html#tag_07_03_04&quot;&gt;
POSIX LC_NUMERIC&lt;&#x2F;a&gt;..html">Namespace container for the JsWorld library objects..Class for localised formatting of numbers.

&lt;p&gt;See: &lt;a href=&quot;http:&#x2F;&#x2F;www.opengroup.org&#x2F;onlinepubs&#x2F;000095399&#x2F;basedefs&#x2F;xbd_chap07.html#tag_07_03_04&quot;&gt;
POSIX LC_NUMERIC&lt;&#x2F;a&gt;.</a></li>
            
                <li><a href="..&#x2F;classes/Namespace container for the JsWorld library objects..Class for parsing localised currency amount strings..html">Namespace container for the JsWorld library objects..Class for parsing localised currency amount strings.</a></li>
            
                <li><a href="..&#x2F;classes/Namespace container for the JsWorld library objects..Class for parsing localised date and time strings..html">Namespace container for the JsWorld library objects..Class for parsing localised date and time strings.</a></li>
            
                <li><a href="..&#x2F;classes/Namespace container for the JsWorld library objects..Class for parsing localised number strings..html">Namespace container for the JsWorld library objects..Class for parsing localised number strings.</a></li>
            
                <li><a href="..&#x2F;classes/Namespace container for the JsWorld library objects..Represents a POSIX-style locale with its numeric, monetary and date&#x2F;time 
properties. Also provides a set of locale helper methods.

&lt;p&gt;The locale properties follow the POSIX standards:

&lt;ul&gt;
    &lt;li&gt;&lt;a href=&quot;http:&#x2F;&#x2F;www.opengroup.org&#x2F;onlinepubs&#x2F;000095399&#x2F;basedefs&#x2F;xbd_chap07.html#tag_07_03_04&quot;&gt;POSIX LC_NUMERIC&lt;&#x2F;a&gt;
    &lt;li&gt;&lt;a href=&quot;http:&#x2F;&#x2F;www.opengroup.org&#x2F;onlinepubs&#x2F;009695399&#x2F;basedefs&#x2F;xbd_chap07.html#tag_07_03_03&quot;&gt;POSIX LC_MONETARY&lt;&#x2F;a&gt;
    &lt;li&gt;&lt;a href=&quot;http:&#x2F;&#x2F;www.opengroup.org&#x2F;onlinepubs&#x2F;000095399&#x2F;basedefs&#x2F;xbd_chap07.html#tag_07_03_05&quot;&gt;POSIX LC_TIME&lt;&#x2F;a&gt;
&lt;&#x2F;ul&gt;.html">Namespace container for the JsWorld library objects..Represents a POSIX-style locale with its numeric, monetary and date&#x2F;time 
properties. Also provides a set of locale helper methods.

&lt;p&gt;The locale properties follow the POSIX standards:

&lt;ul&gt;
    &lt;li&gt;&lt;a href=&quot;http:&#x2F;&#x2F;www.opengroup.org&#x2F;onlinepubs&#x2F;000095399&#x2F;basedefs&#x2F;xbd_chap07.html#tag_07_03_04&quot;&gt;POSIX LC_NUMERIC&lt;&#x2F;a&gt;
    &lt;li&gt;&lt;a href=&quot;http:&#x2F;&#x2F;www.opengroup.org&#x2F;onlinepubs&#x2F;009695399&#x2F;basedefs&#x2F;xbd_chap07.html#tag_07_03_03&quot;&gt;POSIX LC_MONETARY&lt;&#x2F;a&gt;
    &lt;li&gt;&lt;a href=&quot;http:&#x2F;&#x2F;www.opengroup.org&#x2F;onlinepubs&#x2F;000095399&#x2F;basedefs&#x2F;xbd_chap07.html#tag_07_03_05&quot;&gt;POSIX LC_TIME&lt;&#x2F;a&gt;
&lt;&#x2F;ul&gt;</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: node_modules&#x2F;express&#x2F;node_modules&#x2F;connect&#x2F;lib&#x2F;middleware&#x2F;logger.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">

&#x2F;*!
 * Connect - logger
 * Copyright(c) 2010 Sencha Inc.
 * Copyright(c) 2011 TJ Holowaychuk
 * MIT Licensed
 *&#x2F;

&#x2F;**
 * Log buffer.
 *&#x2F;

var buf = [];

&#x2F;**
 * Default log buffer duration.
 *&#x2F;

var defaultBufferDuration = 1000;

&#x2F;**
 * Log requests with the given &#x60;options&#x60; or a &#x60;format&#x60; string.
 *
 * Options:
 *
 *   - &#x60;format&#x60;  Format string, see below for tokens
 *   - &#x60;stream&#x60;  Output stream, defaults to _stdout_
 *   - &#x60;buffer&#x60;  Buffer duration, defaults to 1000ms when _true_
 *   - &#x60;immediate&#x60;  Write log line on request instead of response (for response times)
 *
 * Tokens:
 *
 *   - &#x60;:req[header]&#x60; ex: &#x60;:req[Accept]&#x60;
 *   - &#x60;:res[header]&#x60; ex: &#x60;:res[Content-Length]&#x60;
 *   - &#x60;:http-version&#x60;
 *   - &#x60;:response-time&#x60;
 *   - &#x60;:remote-addr&#x60;
 *   - &#x60;:date&#x60;
 *   - &#x60;:method&#x60;
 *   - &#x60;:url&#x60;
 *   - &#x60;:referrer&#x60;
 *   - &#x60;:user-agent&#x60;
 *   - &#x60;:status&#x60;
 *
 * Formats:
 *
 *   Pre-defined formats that ship with connect:
 *
 *    - &#x60;default&#x60; &#x27;:remote-addr - - [:date] &quot;:method :url HTTP&#x2F;:http-version&quot; :status :res[content-length] &quot;:referrer&quot; &quot;:user-agent&quot;&#x27;
 *    - &#x60;short&#x60; &#x27;:remote-addr - :method :url HTTP&#x2F;:http-version :status :res[content-length] - :response-time ms&#x27;
 *    - &#x60;tiny&#x60;  &#x27;:method :url :status :res[content-length] - :response-time ms&#x27;
 *    - &#x60;dev&#x60; concise output colored by response status for development use
 *
 * Examples:
 *
 *      connect.logger() &#x2F;&#x2F; default
 *      connect.logger(&#x27;short&#x27;)
 *      connect.logger(&#x27;tiny&#x27;)
 *      connect.logger(&#x27;dev&#x27;)
 *      connect.logger(&#x27;:method :url - :referrer&#x27;)
 *      connect.logger(&#x27;:req[content-type] -&gt; :res[content-type]&#x27;)
 *      connect.logger(function(req, res){ return &#x27;some format string&#x27; })
 *
 * Defining Tokens:
 *
 *   To define a token, simply invoke &#x60;connect.logger.token()&#x60; with the
 *   name and a callback function. The value returned is then available
 *   as &quot;:type&quot; in this case.
 *
 *      connect.logger.token(&#x27;type&#x27;, function(req, res){ return req.headers[&#x27;content-type&#x27;]; })
 *
 * Defining Formats:
 *
 *   All default formats are defined this way, however it&#x27;s public API as well:
 *
 *       connect.logger.format(&#x27;name&#x27;, &#x27;string or function&#x27;)
 *
 * @param {String|Function|Object} format or options
 * @return {Function}
 * @api public
 *&#x2F;

exports = module.exports = function logger(options) {
  if (&#x27;object&#x27; == typeof options) {
    options = options || {};
  } else if (options) {
    options = { format: options };
  } else {
    options = {};
  }

  &#x2F;&#x2F; output on request instead of response
  var immediate = options.immediate;

  &#x2F;&#x2F; format name
  var fmt = exports[options.format] || options.format || exports.default;

  &#x2F;&#x2F; compile format
  if (&#x27;function&#x27; != typeof fmt) fmt = compile(fmt);

  &#x2F;&#x2F; options
  var stream = options.stream || process.stdout
    , buffer = options.buffer;

  &#x2F;&#x2F; buffering support
  if (buffer) {
    var realStream = stream
      , interval = &#x27;number&#x27; == typeof buffer
        ? buffer
        : defaultBufferDuration;

    &#x2F;&#x2F; flush interval
    setInterval(function(){
      if (buf.length) {
        realStream.write(buf.join(&#x27;&#x27;), &#x27;ascii&#x27;);
        buf.length = 0;
      }
    }, interval); 

    &#x2F;&#x2F; swap the stream
    stream = {
      write: function(str){
        buf.push(str);
      }
    };
  }

  return function logger(req, res, next) {
    req._startTime = new Date;

    &#x2F;&#x2F; mount safety
    if (req._logging) return next();

    &#x2F;&#x2F; flag as logging
    req._logging = true;

    &#x2F;&#x2F; immediate
    if (immediate) {
      var line = fmt(exports, req, res);
      if (null == line) return;
      stream.write(line + &#x27;\n&#x27;, &#x27;ascii&#x27;);
    } else {
      &#x2F;&#x2F; proxy end to output loggging
      var end = res.end;
      res.end = function(chunk, encoding){
        res.end = end;
        res.end(chunk, encoding);
        var line = fmt(exports, req, res);
        if (null == line) return;
        stream.write(line + &#x27;\n&#x27;, &#x27;ascii&#x27;);
      };
    }


    next();
  };
};

&#x2F;**
 * Compile &#x60;fmt&#x60; into a function.
 *
 * @param {String} fmt
 * @return {Function}
 * @api private
 *&#x2F;

function compile(fmt) {
  fmt = fmt.replace(&#x2F;&quot;&#x2F;g, &#x27;\\&quot;&#x27;);
  var js = &#x27;  return &quot;&#x27; + fmt.replace(&#x2F;:([-\w]{2,})(?:\[([^\]]+)\])?&#x2F;g, function(_, name, arg){
    return &#x27;&quot;\n    + (tokens[&quot;&#x27; + name + &#x27;&quot;](req, res, &quot;&#x27; + arg + &#x27;&quot;) || &quot;-&quot;) + &quot;&#x27;;
  }) + &#x27;&quot;;&#x27;
  return new Function(&#x27;tokens, req, res&#x27;, js);
};

&#x2F;**
 * Define a token function with the given &#x60;name&#x60;,
 * and callback &#x60;fn(req, res)&#x60;.
 *
 * @param {String} name
 * @param {Function} fn
 * @return {Object} exports for chaining
 * @api public
 *&#x2F;

exports.token = function(name, fn) {
  exports[name] = fn;
  return this;
};

&#x2F;**
 * Define a &#x60;fmt&#x60; with the given &#x60;name&#x60;.
 *
 * @param {String} name
 * @param {String|Function} fmt
 * @return {Object} exports for chaining
 * @api public
 *&#x2F;

exports.format = function(name, str){
  exports[name] = str;
  return this;
};

&#x2F;&#x2F; default format

exports.format(&#x27;default&#x27;, &#x27;:remote-addr - - [:date] &quot;:method :url HTTP&#x2F;:http-version&quot; :status :res[content-length] &quot;:referrer&quot; &quot;:user-agent&quot;&#x27;);

&#x2F;&#x2F; short format

exports.format(&#x27;short&#x27;, &#x27;:remote-addr - :method :url HTTP&#x2F;:http-version :status :res[content-length] - :response-time ms&#x27;);

&#x2F;&#x2F; tiny format

exports.format(&#x27;tiny&#x27;, &#x27;:method :url :status :res[content-length] - :response-time ms&#x27;);

&#x2F;&#x2F; dev (colored)

exports.format(&#x27;dev&#x27;, function(tokens, req, res){
  var status = res.statusCode
    , color = 32;

  if (status &gt;= 500) color = 31
  else if (status &gt;= 400) color = 33
  else if (status &gt;= 300) color = 36;

  return &#x27;\033[90m&#x27; + req.method
    + &#x27; &#x27; + req.originalUrl + &#x27; &#x27;
    + &#x27;\033[&#x27; + color + &#x27;m&#x27; + res.statusCode
    + &#x27; \033[90m&#x27;
    + (new Date - req._startTime)
    + &#x27;ms\033[0m&#x27;;
});

&#x2F;&#x2F; request url

exports.token(&#x27;url&#x27;, function(req){
  return req.originalUrl;
});

&#x2F;&#x2F; request method

exports.token(&#x27;method&#x27;, function(req){
  return req.method;
});

&#x2F;&#x2F; response time in milliseconds

exports.token(&#x27;response-time&#x27;, function(req){
  return new Date - req._startTime;
});

&#x2F;&#x2F; UTC date

exports.token(&#x27;date&#x27;, function(){
  return new Date().toUTCString();
});

&#x2F;&#x2F; response status code

exports.token(&#x27;status&#x27;, function(req, res){
  return res.statusCode;
});

&#x2F;&#x2F; normalized referrer

exports.token(&#x27;referrer&#x27;, function(req){
  return req.headers[&#x27;referer&#x27;] || req.headers[&#x27;referrer&#x27;];
});

&#x2F;&#x2F; remote address

exports.token(&#x27;remote-addr&#x27;, function(req){
  return req.socket &amp;&amp; (req.socket.remoteAddress || (req.socket.socket &amp;&amp; req.socket.socket.remoteAddress));
});

&#x2F;&#x2F; HTTP version

exports.token(&#x27;http-version&#x27;, function(req){
  return req.httpVersionMajor + &#x27;.&#x27; + req.httpVersionMinor;
});

&#x2F;&#x2F; UA string

exports.token(&#x27;user-agent&#x27;, function(req){
  return req.headers[&#x27;user-agent&#x27;];
});

&#x2F;&#x2F; request header

exports.token(&#x27;req&#x27;, function(req, res, field){
  return req.headers[field.toLowerCase()];
});

&#x2F;&#x2F; response header

exports.token(&#x27;res&#x27;, function(req, res, field){
  return (res._headers || {})[field.toLowerCase()];
});


    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>
